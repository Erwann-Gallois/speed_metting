{% extends 'base.html.twig' %}
{% block title %}{{"template.modif_mdp"|trans}}{% endblock %}
{% block body %}
    <section class="section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-12 mx-auto">
                    {% include "flash_message.html.twig" %}
                    <h2 class="text-center mb-4">{{"template.modif_mdp"|trans}}</h2>
                    <div class = "custom-form">
                        <div class = "container">
                            {# {{ form_errors(questionForm) }} #}
                            {{ form_start(form) }}
                                {{ form_label(form.ancien_mdp) }}
                                <div class="input-group">
                                    {{form_widget(form.ancien_mdp) }}
                                    <div class="input-group-append">
                                        <button id="togglePassword" class="btn btn-toogle" type="button"><i class="bi bi-eye-fill"></i></button>
                                    </div>
                                </div>
                                {{ form_label(form.plainPassword1) }}
                                <div class="input-group">
                                    {{form_widget(form.plainPassword1) }}
                                    <div class="input-group-append">
                                        <button id="togglePassword1" class="btn btn-toogle" type="button"><i class="bi bi-eye-fill"></i></button>
                                    </div>
                                </div>
                                {{ form_label(form.plainPassword2) }}
                                <div class="input-group">
                                    {{form_widget(form.plainPassword2) }}
                                    <div class="input-group-append">
                                        <button id="togglePassword2" class="btn btn-toogle" type="button"><i class="bi bi-eye-fill"></i></button>
                                    </div>
                                </div>
                                {# {{form_row(form.confirmation_mdp) }} #}
                                <button type="submit" class="btn btn-primary">{{"template.modifier"|trans}}</button>
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        document.getElementById('togglePassword').addEventListener('click', function (e) {
            var passwordInput = document.getElementById('user_change_mpd_ancien_mdp');
            var passwordIcon = this.querySelector('i'); // Sélection de l'icône à l'intérieur du bouton

            // Bascule entre les types 'text' et 'password' pour le champ de mot de passe
            var type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);

            // Bascule la classe de l'icône
            if (type === 'password') {
                passwordIcon.classList.remove('bi-eye-slash-fill');
                passwordIcon.classList.add('bi-eye-fill');
            } else {
                passwordIcon.classList.remove('bi-eye-fill');
                passwordIcon.classList.add('bi-eye-slash-fill');
            }
        });

        document.getElementById('togglePassword1').addEventListener('click', function (e) {
            var passwordInput = document.getElementById('user_change_mpd_plainPassword1');
            var passwordIcon = this.querySelector('i'); // Sélection de l'icône à l'intérieur du bouton

            // Bascule entre les types 'text' et 'password' pour le champ de mot de passe
            var type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);

            // Bascule la classe de l'icône
            if (type === 'password') {
                passwordIcon.classList.remove('bi-eye-slash-fill');
                passwordIcon.classList.add('bi-eye-fill');
            } else {
                passwordIcon.classList.remove('bi-eye-fill');
                passwordIcon.classList.add('bi-eye-slash-fill');
            }
        });

        document.getElementById('togglePassword2').addEventListener('click', function (e) {
            var passwordInput = document.getElementById('user_change_mpd_plainPassword2');
            var passwordIcon = this.querySelector('i'); // Sélection de l'icône à l'intérieur du bouton

            // Bascule entre les types 'text' et 'password' pour le champ de mot de passe
            var type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);

            // Bascule la classe de l'icône
            if (type === 'password') {
                passwordIcon.classList.remove('bi-eye-slash-fill');
                passwordIcon.classList.add('bi-eye-fill');
            } else {
                passwordIcon.classList.remove('bi-eye-fill');
                passwordIcon.classList.add('bi-eye-slash-fill');
            }
        });
    </script>
{% endblock %}